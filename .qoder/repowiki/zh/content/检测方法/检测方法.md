<cite>
**Referenced Files in This Document**   
- [PerfGarden.py](file://PerfGarden.py)
- [README.md](file://README.md)
</cite>

# 检测方法

## Table of Contents
1. [cattail（模板匹配）](#cattail模板匹配)
2. [blover（圆圈检测）](#blover圆圈检测)
3. [skip（跳过图片）](#skip跳过图片)

## cattail（模板匹配）

cattail是perf-garden框架中基于OpenCV的模板匹配检测方法，其核心原理是通过`cv2.matchTemplate`函数在目标图像中滑动搜索与模板图像最相似的区域。该方法首先将待检测图片和模板图片安全读取并转换为灰度图，以消除颜色干扰并提升计算效率。随后，根据配置的`crop`参数对图像进行区域裁剪，聚焦于屏幕顶部或底部的关键区域，从而减少计算量并提高匹配精度。

匹配过程的核心是执行模板匹配算法，通过`cv2.TM_CCOEFF_NORMED`方法计算归一化相关系数，得到一个反映相似度的响应矩阵。系统通过`cv2.minMaxLoc`函数获取该矩阵中的最大值，即为最高相似度得分。最终，将此得分与预设的`threshold`阈值进行比较，若得分大于或等于阈值，则判定为匹配成功。整个流程包含严格的参数校验、图像读取异常处理和尺寸校验，确保了方法的鲁棒性。

**Section sources**
- [PerfGarden.py](file://PerfGarden.py#L13-L84)
- [README.md](file://README.md#L65-L98)

## blover（圆圈检测）

blover方法利用霍夫圆变换（Hough Circle Transform）的数学原理来检测图像中的圆形元素，特别适用于识别加载动画等动态圆形图标。其数学基础是将图像空间中的圆周点映射到参数空间（圆心坐标和半径），通过累加器投票机制找出最可能的圆心位置。该方法首先对输入图像进行高斯模糊以减少噪声，然后应用Canny边缘检测器提取轮廓。

在`cv2.HoughCircles`函数中，参数设置极为敏感：`dp`控制累加器分辨率，`minDist`防止检测到重叠的圆，`param1`和`param2`分别控制Canny边缘检测的高低阈值和累加器的投票阈值，而`minRadius`和`maxRadius`则限定了检测圆的尺寸范围。这些参数需要根据具体应用场景精细调整，例如在识别手机屏幕上的加载动画时，需根据动画的实际大小设置半径范围。最终，方法返回检测到的圆圈数量，并与`threshold`设定的数量进行比较以判断匹配状态。

**Section sources**
- [PerfGarden.py](file://PerfGarden.py#L89-L160)
- [README.md](file://README.md#L99-L124)

## skip（跳过图片）

skip方法在时间序列处理中扮演着预处理和流程控制的角色。其主要作用是跳过指定数量的图片，以应对视频分帧后初期的无用帧、加载动画或过渡动画等干扰场景。通过在处理流水线的早期阶段使用`skip`指令，可以有效缩短整体处理时间，避免在无关帧上浪费计算资源，从而提升整个检测流程的效率和准确性。

该方法在`process_subfolder`函数中被调用，通过直接修改`remaining_files`列表，将前`skip_count`张图片从待处理序列中移除。这使得后续的检测任务能够从更相关的帧开始执行，例如在分析一个包含长时间加载过程的用户操作时，可以先跳过加载阶段的图片，直接从主界面出现后开始检测关键元素。这种机制简化了任务配置，使用户能够更灵活地控制检测流程。

**Section sources**
- [PerfGarden.py](file://PerfGarden.py#L362-L518)
- [README.md](file://README.md#L125-L137)